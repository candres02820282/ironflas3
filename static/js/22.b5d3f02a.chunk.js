(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{165:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return c}),a.d(t,"d",function(){return g});var n=a(32),r=a(13),o=a(14),l=a.n(o),s=function(e,t,a){return function(o){l.a.post(r.f,{user_id:e,token:t,restaurant_id:a}).then(function(e){var t=e.data;return o({type:n.b,payload:t})}).catch(function(e){console.log(e)})}},i=function(e,t,a,o,s,i,c){return function(g){l.a.post(r.H,{token:t,user_id:e,latitude:a,longitude:o,address:s,house:i,tag:c}).then(function(e){var t=e.data;return g({type:n.c,payload:t})}).catch(function(e){console.log(e)})}},c=function(e,t,a){return function(o){l.a.post(r.d,{token:a,user_id:e,address_id:t}).then(function(e){var t=e.data;return o({type:n.a,payload:t})}).catch(function(e){console.log(e)})}},g=function(e,t,a){return function(o){l.a.post(r.L,{token:a,user_id:e,address_id:t}).then(function(e){var t=e.data;return o({type:n.d,payload:t})}).catch(function(e){console.log(e)})}}},223:function(e){e.exports=[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]}]},245:function(e,t,a){"use strict";a.r(t);var n=a(59),r=a(3),o=a(4),l=a(6),s=a(5),i=a(7),c=a(0),g=a.n(c),d=a(24),u=a(37),m=a(154),h=a.n(m),p=a(210),f=a(223),y=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={initialPosition:{lat:37.77,lng:-122.42},zoom:15},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(null!==localStorage.getItem("geoLocation")){var t=JSON.parse(localStorage.getItem("geoLocation")).geometry.location;this.setState({initialPosition:{lat:t.lat,lng:t.lng}})}setTimeout(function(){e.setState({zoom:18})},1e3)}},{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement(p.Map,{google:this.props.google,style:{width:"100%",height:"55vh"},initialCenter:{lat:JSON.parse(localStorage.getItem("geoLocation")).geometry.location.lat,lng:JSON.parse(localStorage.getItem("geoLocation")).geometry.location.lng},onDragend:function(t,a,n){return e.props.onMarkerDragEnd(a)},zoom:this.state.zoom,styles:f,zoomControl:!1,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,fullscreenControl:!1,onReady:function(t,a){e.props.reverseLookup(e.state.initialPosition.lat,e.state.initialPosition.lng),localStorage.setItem("userLat",a.center.lat()),localStorage.setItem("userLng",a.center.lng())},onDragstart:function(){e.props.handleDragging(!0)}}),g.a.createElement("img",{src:"/assets/img/various/dragable-marker.png",alt:"Marker",className:"center-marker"}))}}]),t}(c.Component),v=Object(p.GoogleApiWrapper)({apiKey:localStorage.getItem("googleApiKey"),LoadingContainer:function(){return g.a.createElement(d.a,{height:400,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},g.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:window.innerWidth,height:"400"}))}})(y),b=a(21),E=a.n(b),S=a(12),x=a(165);a.d(t,"GeoLocationPage",function(){return w});var w=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={location:"",dragging:!0,house:"",tag:"",error:!1,loading:!1},a.handleAddressInput=function(e){var t=e.target,r=t.name,o=t.value;a.setState(Object(n.a)({},r,o))},a.reverseLookup=function(e,t){h.a.setApiKey(localStorage.getItem("googleApiKey")),h.a.fromLatLng(e,t).then(function(e){var t=e.results[0].formatted_address;console.log(t),a.setState({location:t,dragging:!1})},function(e){console.error(e)})},a.onMarkerDragEnd=function(e){console.log(e),console.log({lat:e.center.lat(),lng:e.center.lng()}),localStorage.setItem("userLat",e.center.lat()),localStorage.setItem("userLng",e.center.lng()),a.reverseLookup(e.center.lat(),e.center.lng())},a.handleDragging=function(){a.setState({dragging:!0})},a.handleSaveNewAddress=function(){var e=a.props.user;if(e.success)a.setState({loading:!0}),a.props.saveAddress(e.data.id,e.data.auth_token,localStorage.getItem("userLat"),localStorage.getItem("userLng"),a.state.location,a.state.house,a.state.tag);else{var t={lat:localStorage.getItem("userLat"),lng:localStorage.getItem("userLng"),address:a.state.location,house:a.state.house,tag:a.state.tag};localStorage.setItem("userSetAddress",JSON.stringify(t))}setTimeout(function(){a.context.router.history.push("/restaurants")},100)},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log(e)}},{key:"render",value:function(){return g.a.createElement("div",null,this.state.loading&&g.a.createElement("div",{className:"height-100 overlay-loading"},g.a.createElement("div",null,g.a.createElement("img",{src:"/assets/img/loading-food.gif",alt:localStorage.getItem("pleaseWaitText")}))),g.a.createElement(v,{reverseLookup:this.reverseLookup,onMarkerDragEnd:this.onMarkerDragEnd,handleDragging:this.handleDragging}),g.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative",borderRadius:"0 50px 50px 0"},onClick:this.context.router.history.goBack},g.a.createElement("i",{className:"si si-arrow-left"}),g.a.createElement(E.a,{duration:"500"})),g.a.createElement("div",{className:"confirm-gps-location"},this.state.dragging?g.a.createElement(d.a,{height:345,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},g.a.createElement("rect",{x:"20",y:"15",rx:"0",ry:"0",width:"110",height:"16"}),g.a.createElement("rect",{x:"20",y:"45",rx:"0",ry:"0",width:"280",height:"20"}),g.a.createElement("rect",{x:"315",y:"45",rx:"0",ry:"0",width:"70",height:"20"}),g.a.createElement("rect",{x:"20",y:"100",rx:"0",ry:"0",width:"110",height:"16"}),g.a.createElement("rect",{x:"20",y:"130",rx:"0",ry:"0",width:"280",height:"20"}),g.a.createElement("rect",{x:"20",y:"180",rx:"0",ry:"0",width:"110",height:"16"}),g.a.createElement("rect",{x:"20",y:"210",rx:"0",ry:"0",width:"280",height:"20"}),g.a.createElement("rect",{x:"0",y:"280",rx:"0",ry:"0",width:window.innerWidth,height:"60"})):g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"p-15"},g.a.createElement("p",{className:"mb-0 font-w600 text-muted"},localStorage.getItem("yourLocationText")),g.a.createElement("div",{className:"d-flex align-items-baseline"},g.a.createElement("p",{className:"truncate-text mb-0",style:{minWidth:"84%"}},this.state.location),g.a.createElement(u.a,{to:"/search-location",delay:400,className:"change-address-text m-0 p-5 pull-right",style:{color:localStorage.getItem("storeColor"),position:"relative"}},localStorage.getItem("cartChangeLocation"),g.a.createElement(E.a,{duration:400}))),g.a.createElement("hr",null),g.a.createElement("div",{className:"form-group m-0"},g.a.createElement("label",{className:"col-12 edit-address-input-label p-0"},localStorage.getItem("editAddressAddress")),g.a.createElement("div",{className:"col-md-9 p-0"},g.a.createElement("input",{type:"text",name:"house",onChange:this.handleAddressInput,className:"form-control edit-address-input mb-2",value:this.state.house})),g.a.createElement("label",{className:"col-12 edit-address-input-label p-0"},localStorage.getItem("editAddressTag")),g.a.createElement("div",{className:"col-md-9  p-0"},g.a.createElement("input",{type:"text",name:"tag",onChange:this.handleAddressInput,className:"form-control edit-address-input edit-address-tag mb-2",placeholder:localStorage.getItem("addressTagPlaceholder"),value:this.state.tag})))),g.a.createElement("button",{type:"button",className:"btn-save-address",onClick:this.handleSaveNewAddress,style:{backgroundColor:localStorage.getItem("storeColor"),position:"fixed",bottom:"0"}},localStorage.getItem("buttonSaveAddress"),g.a.createElement(E.a,{duration:200})))))}}]),t}(c.Component);w.contextTypes={router:function(){return null}};t.default=Object(S.b)(function(e){return{user:e.user.user}},{saveAddress:x.c})(w)}}]);